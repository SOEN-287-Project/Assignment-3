

<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Js and Stylesheet for fa icons (ie shopping cart)-->
    <script src="https://kit.fontawesome.com/b569b39868.js" crossorigin="anonymous"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet" />

    <!--Stylesheet and Js for bootstrap 4.0/JQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <!--Display Favicon cart-->
    <link rel="apple-touch-icon" sizes="180x180" href="images/cart_favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="images/cart_favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="images/cart_favicon/favicon-16x16.png" />
    <link rel="manifest" href="images/cart_favicon/site.webmanifest" />
    <link rel="mask-icon" href="images/cart_favicon/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

    <!--Custom Stylesheets-->
    <link rel="stylesheet" href="styles/style.css" />

    <link rel="stylesheet" href="styles/P4_stylesheet.css">

    <!--Custom Stylesheets-->
    <script src="Javascript/backend.js"></script>

    <!--Grocery Store name -->
    <title>Trader Jack's</title>
</head>
<script>
    $(function () {
        $("#navbar").load("Components/navbar.html");
    });
</script>

<body>
    <div id="navbar"></div>
    <div class="container1"> <div class="box1"> <h1 class="My_cart">My Cart</h1>

        <ul class="list">

            <li> Apple <input type="number" id="cart-1-quantity" value="0" onchange = "update_input()"><button class="add">Add</button> <button class="remove">remove</button> </li>
            <li> Bananas <input type="number" id="cart-2-quantity" value="0" onchange = "update_input()"><button class="add">Add</button>  <button class="remove">remove</button></li>
            <li> Blueberries <input type="number" id="cart-3-quantity" value="0" onchange = "update_input()"><button class="add">Add</button> <button class="remove">remove</button> </li>

        </ul>


    </div>
    </div>

    <div class="container2"> <div class="box2"> <h4>Cart Summary</h4> 
                             <h5>Subtotal: </h5>
                             <h5 class="price"><span id="total4">$0.00</span></h5>
                             <h5>QST: </h5>
                             <h5 class="price"><span id="total5">$0.00</span></h5>
                             <h5>GST: </h5>
                             <h5 class="price"><span id="total6">$0.00</span></h5>
                             <h2>Estimated Total: </h2>
                             <h5 class="price"><span id="total7">$0.00</span></h5></div></div>

    <div class="continue_shopping"> <button>Continue Shopping</button> </div>


</body>
<script>  
foodCounter1 = localStorage.getItem(`foodCounter1`); 

foodCounter2 = localStorage.getItem(`foodCounter2`); 

foodCounter3 = localStorage.getItem(`foodCounter3`); 
 
    if((foodCounter1 != null) || (foodCounter2 != null) || (foodCounter3 != null)){ 

        document.getElementById("cart-1-quantity").value = foodCounter1; 
        document.getElementById("cart-2-quantity").value = foodCounter2; 
        document.getElementById("cart-3-quantity").value = foodCounter3; 
        update_input(); 
    } 

  
function update_input(){  
     var x = document.getElementById("cart-1-quantity").value;  

     var y = document.getElementById("cart-2-quantity").value;  

     var z = document.getElementById("cart-3-quantity").value;  

   var a = (x)*1.99 + (y)*1.99 + (z)*1.99;  

  var b = a * 0.1;  

  var c = a * 0.05;  

  var d = a + b + c;  

    let quantity1 = document.getElementById("cart-1-quantity").value;  

     let quantity2 = document.getElementById("cart-2-quantity").value;  

      let quantity3 = document.getElementById("cart-3-quantity").value;  

    foodCounter1 = document.getElementById("cart-1-quantity").value;  

    foodCounter2 = document.getElementById("cart-2-quantity").value;  

    foodCounter3 = document.getElementById("cart-3-quantity").value;  

    localStorage.setItem(`foodCounter1`, foodCounter1);  

    localStorage.setItem(`foodCounter2`, foodCounter2);  
    localStorage.setItem(`foodCounter3`, foodCounter3);  
    console.log(localStorage.getItem(`foodCounter1`));  

    console.log(localStorage.getItem(`foodCounter2`));  
    console.log(localStorage.getItem(`foodCounter3`));  

    if (window.location.href.indexOf("?") == -1) {  

 
        history.replaceState("", "", window.location.href + "?quantity1=" + foodCounter1  + "&quantity2=" + foodCounter2 + "&quantity3=" + foodCounter3) //Updates quantity parameter in url  

    } else {  
            history.replaceState("", "", window.location.href.substring(0, window.location.href.indexOf("?quantity1")) + "?quantity1=" + foodCounter1 + "&quantity2=" + foodCounter2 + "&quantity3=" + foodCounter3) //Updates quantity parameter in url  
    }  
document.getElementById("total4").innerHTML = "$".concat(a);   

document.getElementById("total7").innerHTML = "$".concat(d);  

document.getElementById("total5").innerHTML = "$".concat(b);  

document.getElementById("total6").innerHTML = "$".concat(c);  
}  
</script>  
</html>
